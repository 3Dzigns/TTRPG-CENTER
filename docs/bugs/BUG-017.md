# BUG-024: Add chunk size guard (300–500 chars) and hard byte cap before DB insert


## Summary
Some chunks exceed Astra's ~8KB JSON string cap causing `SHRED_DOC_LIMIT_VIOLATION`. We need a hard post-split byte cap and smaller target size.

## Impact
Writes fail for oversized chunks; ingestion aborts.

## Fix
- Target chunk size: **300–500 characters** (post-normalization) with a **hard byte cap** at 7000 bytes for `content` fields.
- If a chunk would exceed cap, re-split by sentence/paragraph before insert.

## Acceptance Criteria (User Stories)
**US-024A (Dev)**: As a developer, oversized chunks are automatically re-split; no DB write errors occur.
**US-024B (Admin)**: As an admin, chunk stats show max content length < 7000 bytes.

## Test Cases
**Unit**
- Feed a 12KB paragraph → splitter returns multiple sub-chunks each < 7000 bytes.
- Verify metadata (page/section) is preserved in sub-chunks.

**Functional**
- Ingest a known large section → no `SHRED_DOC_LIMIT_VIOLATION` errors.
