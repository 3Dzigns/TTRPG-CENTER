# BUG-004: Admin dashboard buttons inactive & environment status not reflecting reality

## Summary
Admin dashboard controls (Logs, Artifacts, Cache toggles, Refresh) are **non-functional**, and **Environment Status** panels show `Inactive` even while the DEV environment is running.

## Expected
- All buttons wired to backend APIs.
- Environment cards display **live status** (healthy, port, memory, uptime) based on **server telemetry**, not hardcoded placeholders.
- DEV card should show running state when the DEV server is up.

## Actual
- Buttons produce no actions.
- Status badges remain `Inactive` and memory/uptime are `--`.

## Impact
- Operators cannot manage or diagnose environments.
- Violates Phase 4 observability & Phase 0 health requirements.

## Proposed Fix
1. **Backend endpoints (FastAPI)**
   - `GET /admin/api/env` → `[ {name, port, status, uptime_s, mem_pct, cpu_pct} ]`
   - `GET /admin/api/env/{name}/logs?tail=1000`
   - `GET /admin/api/env/{name}/artifacts`
   - `POST /admin/api/cache/{name}/toggle {enabled: bool}`
   - Implement via an **agent** per environment that reads the env’s `ports.json`, pings `/healthz`, and reports metrics.
2. **Frontend wiring**
   - Buttons call the endpoints above; show toasts on success/error.
   - Poll `GET /admin/api/env` every 5–10s (SSE/WebSocket optional).

### Example status probe (backend)
```python
# admin/status.py
import httpx, psutil, time
async def probe_env(name, port):
    url = f"http://127.0.0.1:{port}/healthz"
    try:
        t0=time.time(); r=await httpx.get(url, timeout=1.0)
        return {"name":name,"port":port,"status":"healthy" if r.status_code==200 else "degraded",
                "latency_ms": int((time.time()-t0)*1000)}
    except Exception:
        return {"name":name,"port":port,"status":"inactive"}
```

## Acceptance Criteria
- Clicking **Logs** opens the latest `bulk_ingest_*.log` list for that env; selecting one streams last 2k lines.
- **Artifacts** shows job folders for that env and latest manifest details.
- Status card for DEV flips to **Healthy** within ≤5s when DEV server is running.
- Cache toggles persist and reflect actual server state.

## Automated Tests
- **Unit:** status probe returns `inactive` on connection error; `healthy` on 200; latency measured.
- **Functional (Playwright):**
  - DEV up → dashboard shows `Healthy` and non‑`--` metrics.
  - Clicking Logs fetches list; selecting one shows content.
- **Regression:**
  - Polling does not hammer server (verify interval & abort on hidden tab).
